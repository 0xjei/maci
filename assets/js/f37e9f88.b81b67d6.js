"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[6057],{2259:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>a,toc:()=>l});var i=s(5250),r=s(720);const c={title:"MACI versioning and release process",description:"How MACI's versioning and release process works",sidebar_label:"MACI versioning",sidebar_position:20},o="MACI versioning and release process",a={id:"versioning",title:"MACI versioning and release process",description:"How MACI's versioning and release process works",source:"@site/versioned_docs/version-v1.x/versioning.md",sourceDirName:".",slug:"/versioning",permalink:"/docs/versioning",draft:!1,unlisted:!1,editUrl:"https://github.com/privacy-scaling-explorations/maci/edit/dev/website/versioned_docs/version-v1.x/versioning.md",tags:[],version:"v1.x",sidebarPosition:20,frontMatter:{title:"MACI versioning and release process",description:"How MACI's versioning and release process works",sidebar_label:"MACI versioning",sidebar_position:20},sidebar:"version-1.x/mySidebar",previous:{title:"Troubleshooting",permalink:"/docs/troubleshooting"},next:{title:"Contributing",permalink:"/docs/contributing/"}},t={},l=[{value:"MACI code",id:"maci-code",level:2},{value:"MACI versioning",id:"maci-versioning",level:2},{value:"MACI Release Process",id:"maci-release-process",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"maci-versioning-and-release-process",children:"MACI versioning and release process"}),"\n",(0,i.jsx)(n.p,{children:"This document outlines the approach to versioning and releasing the MACI project. The primary goal here is to set clear expectations and provide a consistent user experience for developers integrating MACI and its packages."}),"\n",(0,i.jsx)(n.h2,{id:"maci-code",children:"MACI code"}),"\n",(0,i.jsxs)(n.p,{children:["MACI code consists 3 core parts: Circom circuits, Solidity contracts and JS (TS) libraries, from which we release a total of 7 NPM packages. See the ",(0,i.jsx)(n.a,{href:"/docs/overview",children:"codebase overview"})," for more details."]}),"\n",(0,i.jsx)(n.h2,{id:"maci-versioning",children:"MACI versioning"}),"\n",(0,i.jsxs)(n.p,{children:["MACI follows the ",(0,i.jsx)(n.a,{href:"https://semver.org/",children:"Semantic Versioning Specification (SemVer)"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"All MACI packages are organized in our monorepo and follow a global release approach, meaning that all packages have the same version."}),"\n",(0,i.jsxs)(n.p,{children:["Currently, MACI core team manually decides when to release and what the version should be. Packages are released ",(0,i.jsx)(n.a,{href:"https://github.com/privacy-scaling-explorations/maci/blob/dev/.github/workflows/release.yml",children:"automatically via CI"})," when a new tag is created in GitHub. ",(0,i.jsx)(n.a,{href:"https://github.com/privacy-scaling-explorations/maci/releases",children:"You can view our releases and tags in GitHub"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"maci-release-process",children:"MACI Release Process"}),"\n",(0,i.jsx)(n.p,{children:"To release a new version of MACI, follow these steps:"}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsx)(n.p,{children:"Version number '1.2.3' is used here as an example. You should replace the version number '1.2.3' with the version number you are planning to release"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Verify that tests have passed on GitHub Actions"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Clone maci:"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"git clone https://github.com/privacy-scaling-explorations/maci\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsxs)(n.li,{children:["Switch to the ",(0,i.jsx)(n.code,{children:"dev"})," branch:"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"git checkout dev\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:"Install required dependencies:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"pnpm install\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"5",children:["\n",(0,i.jsxs)(n.li,{children:["Run ",(0,i.jsx)(n.code,{children:"lerna version"})," to update CHANGELOG and version numbers of sub-packages:"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"pnpm exec lerna version --no-push --no-git-tag-version --conventional-commits 1.2.3\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"6",children:["\n",(0,i.jsx)(n.li,{children:"Commit changes:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'git commit --message "chore(release): publish 1.2.3"\n'})}),"\n",(0,i.jsxs)(n.ol,{start:"7",children:["\n",(0,i.jsx)(n.li,{children:"Push changes and create a pull request"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"After the pull request has been merged:"}),"\n",(0,i.jsxs)(n.ol,{start:"8",children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Retrieve merged commit"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Add a tag:"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"git tag --sign v1.2.3 --message v1.2.3\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"10",children:["\n",(0,i.jsx)(n.li,{children:"Publish tag:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"git push v1.2.3\n"})}),"\n",(0,i.jsx)(n.p,{children:"Once the tag is pushed, GitHub Actions will automatically publish the packages to npm.js and create a release on GitHub."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:"The following packages will be published on NPM:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/maci-circuits",children:(0,i.jsx)(n.code,{children:"@maci-circuits"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/maci-contracts",children:(0,i.jsx)(n.code,{children:"@maci-contracts"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/maci-cli",children:(0,i.jsx)(n.code,{children:"@maci-cli"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/maci-core",children:(0,i.jsx)(n.code,{children:"@maci-core"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/maci-crypto",children:(0,i.jsx)(n.code,{children:"@maci-crypto"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/maci-domainobjs",children:(0,i.jsx)(n.code,{children:"@maci-domainobjs"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/maci-integrationtests",children:(0,i.jsx)(n.code,{children:"@maci-integrationtests"})})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},720:(e,n,s)=>{s.d(n,{Z:()=>a,a:()=>o});var i=s(79);const r={},c=i.createContext(r);function o(e){const n=i.useContext(c);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(c.Provider,{value:n},e.children)}}}]);